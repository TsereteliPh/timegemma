"use strict";function get_siblings(t){var r=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&r.push(e),e=e.nextSibling}return r}function slideDown(e){e.style.maxHeight=e.scrollHeight+"px"}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function setHeaderScrollClass(){const e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let a;function t(e){e.keyCode&&(a=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",r=0,n=t.replace(/\D/g,""),s=this.value.replace(/\D/g,""),o=t.replace(/[_\d]/g,function(e){return r<s.length?s.charAt(r++)||n.charAt(r):e});-1!=(r=o.indexOf("_"))&&(r<5&&(r=3),o=o.slice(0,r));var i=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||47<a&&a<58)&&(this.value=o),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault();const t=this;let r=new FormData(t);var e=t.name,n=t.querySelector("input[type=file]");r.append("action","send_mail"),e&&(r.append("form_name",e),n&&Array.from(n.files).forEach((e,t)=>{r.append(t.toString(),e)}),fetch(adem_ajax.url,{method:"POST",body:r}).then(e=>e.text()).then(e=>{Fancybox.close(!0),t.reset(),setTimeout(function(){Fancybox.show([{src:"#success",type:"inline"}])},100)}).catch(e=>{console.error("Error:",e)}))})})}function setFileName(){var e=document.querySelectorAll("input[type=file]");e&&e.forEach(function(e){e.addEventListener("change",function(e){e.target.nextElementSibling.textContent=e.target.files[0].name})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var r;(r=e).addEventListener("click",function(e){var t=e.target.closest("li");t.classList.contains("active")&&t.parentNode.classList.toggle("open"),t.classList.contains("active")||e.target===r||(e=t,t=document.querySelector("#"+e.getAttribute("data-tab")),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}function calcBreadcrumbsPadding(){var e=document.querySelector(".main"),t=document.querySelector(".breadcrumb");let r=document.querySelector(".js-bc-padding"),n;n=1439<window.innerWidth?124:60,t&&((r=r||e.firstElementChild).style.marginTop=0,r.style.paddingTop=t.clientHeight+n+"px")}function changeInputQuantity(e,t=0){e=document.querySelector(e);e&&e.addEventListener("click",function(e){var t,r,n,s,o;e.target.classList.contains("quantity__btn")&&(t=e.target.closest(".quantity").querySelector(".quantity__input"),r=parseInt(t.value),n=parseInt(t.getAttribute("min")),s=parseInt(t.getAttribute("max")),o=parseInt(t.getAttribute("step")),e.target.classList.contains("quantity__btn--add")?t.value=s&&s<=r?s:r+o:(n||0==n)&&r-o<=n?t.value=n:1<r&&(t.value=r-o),e=new Event("change",{bubbles:!0,cancelable:!0}),t.dispatchEvent(e))})}function showMorePosts(){var e=document.querySelector(".js-show-more");e&&e.addEventListener("click",function(e){e.stopImmediatePropagation();const t=document.querySelector(".js-show-more-container");this.textContent="Загрузка...";fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_more",query:posts,page:current_page})}).then(e=>e.text()).then(e=>{this.innerHTML=this.dataset.text,t.insertAdjacentHTML("beforeend",e),++current_page===max_pages&&this.remove()}).catch(e=>{console.error("Error:",e)})})}function wcAddToCart(){var e=document.querySelector(".product__cart");if(e){const n=e.querySelector(".qty");let r;n.addEventListener("change",function(e){const t=this;null!=r&&clearTimeout(r),r=setTimeout(function(){t.closest(".product__cart").querySelector(".btn").click()},1e3)}),e.addEventListener("submit",function(e){e.preventDefault();this.classList.add("loader");e=new FormData(this);e.append("action","wc_add_to_cart"),fetch(adem_ajax.url,{method:"POST",body:e}).then(e=>e.json()).then(e=>{this.classList.remove("loader"),0<e.count?this.classList.add("in-cart"):(this.classList.remove("in-cart"),n.value=1);var t=document.querySelector("#header-cart-counter");t.innerHTML=e.count,0<e.countAll?t.classList.add("active"):t.classList.remove("active")}).catch(e=>{console.error("Error:",e)})})}}document.addEventListener("DOMContentLoaded",function(){setHeaderScrollClass(),setFileName(),sendForm(),setTelMask(),tabs(),showMorePosts(),calcBreadcrumbsPadding(),changeInputQuantity(".product__cart"),wcAddToCart()});try{Fancybox.bind("[data-fancybox]",{animated:!1}),Fancybox.bind('[data-src="#order-calc"]',{defaultDisplay:"block",dragToClose:!1})}catch(e){console.log(e)}const customProgressbar=function(e,t){var t=e.el.querySelector(t),r=t.querySelector(".slider-controls__counter"),n=e.activeIndex+1,e=360/e.slides.length*n;let s;s=n<10?"0"+n:n,r.textContent=s,t.style.setProperty("--progressbar-angle",e+"deg")},welcomeSlider=document.querySelector(".welcome__slider");if(welcomeSlider){let e=new Swiper(welcomeSlider,{slidesPerView:"auto",spaceBetween:0,speed:1400,allowTouchMove:!1,autoplay:{delay:4e3},navigation:{nextEl:".slider-controls__next",prevEl:".slider-controls__prev"},on:{afterInit:function(){customProgressbar(this,".slider-controls__progressbar")},slideChange:function(){customProgressbar(this,".slider-controls__progressbar")}}})}const productGallerySlider=document.querySelector(".product__gallery");if(productGallerySlider){let e=new Swiper(productGallerySlider,{slidesPerView:"auto",spaceBetween:60,centeredSlides:!0,navigation:{nextEl:".slider-controls__next",prevEl:".slider-controls__prev"},pagination:{el:".swiper-pagination",clickable:!0},on:{afterInit:function(){customProgressbar(this,".slider-controls__progressbar")},slideChange:function(){customProgressbar(this,".slider-controls__progressbar")}},breakpoints:{577:{spaceBetween:85}}})}const mainSliders=document.querySelectorAll(".main-slider"),productList=(mainSliders&&mainSliders.forEach(e=>{new Swiper(e,{slidesPerView:1,centeredSlides:!0,spaceBetween:30,navigation:{nextEl:".slider-controls__next",prevEl:".slider-controls__prev"},on:{afterInit:function(){customProgressbar(this,".slider-controls__progressbar")},slideChange:function(){customProgressbar(this,".slider-controls__progressbar")}},breakpoints:{1501:{slidesPerView:6,centeredSlides:!1},1280:{slidesPerView:5,centeredSlides:!1},992:{slidesPerView:4,centeredSlides:!1},769:{slidesPerView:3,centeredSlides:!1},577:{slidesPerView:2,centeredSlides:!1}}})}),document.addEventListener("DOMContentLoaded",function(e){var t=document.querySelector(".header");t&&(t.querySelector(".header__burger").onclick=function(){this.classList.toggle("active")})}),document.querySelector(".product__list"));if(productList){const Ra=productList.querySelectorAll(".product__item-button"),Sa=()=>{for(var e of Ra)e.classList.remove("active"),e.nextElementSibling.style.maxHeight=0};Ra.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")?Sa():(Sa(),this.classList.add("active"),slideToggle(this.nextElementSibling))})})}